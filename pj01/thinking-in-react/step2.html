<html>
<head>
<meta charset="utf-8">
<script src="https://unpkg.com/react@latest/dist/react.js"></script>
<script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
<script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
<title>Thinking in react step2</title>
</head>
<body>
    <div id="container"></div>
    <script type="text/babel">
        class ProductCategoryRow extends React.Component{
            constructor(props){
                super(props);
            }

            render(){
                return(
                <tr>
                    <th colSpan='2'>{this.props.category}</th>
                </tr>
                )
            }
        }
        class ProductRow extends React.Component{
            constructor(props){
                super(props);
            }

            render(){
                var name= this.props.product.stocked ?
                    this.props.product.name :
                    <span style={{color:'red'}}> {this.props.product.name} </span>;
                return(
                    <tr>
                        <td>{name}</td>
                        <td>{this.props.product.price}</td>
                    </tr>
                )
            }
        }

        class ProductTable extends React.Component{
            constructor(props){
                super(props);
            }

            render(){
                var rows= [];
                var lastCategory= null;
                this.props.products.forEach(function(product){

                    rows.push(<ProductRow product={product} key={product.name} />);
                    lastCategory= product.category;
                });
                return(
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {rows}
                        </tbody>
                    </table>
                )
            }
        }

        class SearchBar extends React.Component{
            constructor(props){
                super(props);
            }

            render(){
                return(
                    <form>
                        <input type='text' value="" />
                        {' '}
                        Only show in stocked
                        <input type="checkbox" />
                    </form>
                )
            }
        };

        class FilterableProductTable extends React.Component{
            constructor(props){
                super(props);
            }

            render(){
                return(
                    <div>
                        <SearchBar />
                        <ProductTable products={this.props.products} />
                    </div>
                )
            }
        }

        var PRODUCTS = [
        {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'},
        {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'},
        {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'},
        {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'},
        {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'},
        {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'}
        ];

        ReactDOM.render(
            <FilterableProductTable products={PRODUCTS} />,
            document.getElementById('container')
        );
    </script>
</body>
</html>
